{"version":3,"file":"static/js/718.5cb5c759.chunk.js","mappings":"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","sources":["components/ListItem/ListItem.js","components/ListItem/ListItem.styled.js","components/MoviesPage/MoviesPage.js","components/MoviesPage/MoviesPage.styled.js","services/movie-api.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport { ListItemStyled, Link } from './ListItem.styled';\n\nexport default function ListItem({\n  item: {\n    id,\n    title,\n    name,\n  },\n}) {\n  \n  return (\n    <ListItemStyled>\n      {<Link to={`/movies/${id}`}>{title || name}</Link>}\n    </ListItemStyled>\n  );\n}\n\nListItem.propTypes = {\n  item: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    title: PropTypes.string,\n    name: PropTypes.string,\n  }),\n};\n","import styled from \"styled-components\";\nimport { Link as RouterLink } from 'react-router-dom';\n\nexport const ListItemStyled = styled.li`\n  max-width: 200px;\n`;\n\nexport const Link = styled(RouterLink)`\n  text-decoration: none;\n`;\n\n","import React, { useState, useEffect } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { FaSearch } from \"react-icons/fa\";\nimport PropTypes from \"prop-types\";\nimport ListItem from \"components/ListItem/ListItem\";\nimport { Status } from \"utils/makeChunk\";\nimport { useLocation } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { useSearchParams } from \"react-router-dom\";\n\nimport {\n  SearchbarStyled,\n  SearchFormStyled,\n  SearchFormButtonStyled,\n  SearchFormButtonSpanStyled,\n  SearchFormInputStyled,\n  SearchFormButtonLabelStyled,\n} from \"./MoviesPage.styled\";\nimport { getSearchMovies } from \"services/movie-api\";\n\nfunction Searchbar({ status }) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [, setSearchParams] = useSearchParams();\n  \n  const inputQueryChange = (e) => {\n    setSearchQuery(e.target.value.toLowerCase());\n  };\n\n  const formSubmit = (e) => {\n    e.preventDefault();\n    const formQuery = searchQuery.trim();\n    if (formQuery === \"\") {\n      setSearchParams({});\n      toast.error(\"Please type your query request\");\n      return;\n    }\n    setSearchParams({ query: formQuery });\n    setSearchQuery(\"\");\n  };\n\n  return (\n    <SearchbarStyled>\n      <SearchFormStyled onSubmit={formSubmit}>\n        <SearchFormButtonLabelStyled>\n          <SearchFormInputStyled\n            name=\"searchQuery\"\n            value={searchQuery}\n            onChange={inputQueryChange}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search movies\"\n          />\n        </SearchFormButtonLabelStyled>\n        <SearchFormButtonStyled type=\"submit\" disabled={status === \"pending\"}>\n          <FaSearch />\n          <SearchFormButtonSpanStyled>Search</SearchFormButtonSpanStyled>\n        </SearchFormButtonStyled>\n      </SearchFormStyled>\n    </SearchbarStyled>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n  status: PropTypes.string,\n};\n\nexport default function MoviesPage({ onSubmit, status, page, setStatus }) {\n  const [searchMovies, setSearchMovies] = useState(null);\n  const location = useLocation();\n  const [searchParams] = useSearchParams();\n  const query = searchParams.get(\"query\");\n\n  useEffect(() => {\n    if (query === \"\") {\n      return;\n    }\n    setStatus(Status.PENDING);\n    getSearchMovies(query, page)\n      .then((newSearchMovies) => {\n        if (!newSearchMovies?.results?.length) {\n          toast(`No results for ${query}`);\n        }\n        setSearchMovies(newSearchMovies);\n        setStatus(Status.RESOLVED);\n      })\n      .catch((error) => toast(\"No results, please try again\"));\n  }, [page, query, setStatus]);\n\n  useEffect(() => {\n    return () => {\n      setSearchMovies(null);\n    };\n  }, []);\n\n  const hasRequestMovies = searchMovies?.results?.length > 0;\n  const goBackURL = location?.state?.from ?? \"/\";\n  return (\n    <div>\n      <Searchbar onSubmit={onSubmit} status={status} />\n      <Link to={goBackURL}>&lArr; Go back</Link>\n      <ul>\n        {hasRequestMovies &&\n          searchMovies.results.map((item) => <ListItem key={item.id} item={item} />)}\n      </ul>\n    </div>\n  );\n}\n\nMoviesPage.propTypes = {\n  onSubmit: PropTypes.func,\n  status: PropTypes.string,\n  query: PropTypes.string,\n  page: PropTypes.number,\n  setStatus: PropTypes.func,\n};\n","import styled from \"styled-components\";\n\nconst SearchbarStyled = styled.header`\n  top: 0;\n  left: 0;\n  position: sticky;\n  z-index: 1100;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 64px;\n  padding-right: 24px;\n  padding-left: 24px;\n  padding-top: 12px;\n  padding-bottom: 12px;\n  color: #fff;\n  background-color: #3f51b5;\n  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14),\n    0px 1px 10px 0px rgba(0, 0, 0, 0.12);\n`;\n\nconst SearchFormStyled = styled.form`\n  display: flex;\n  align-items: center;\n  width: 100%;\n  max-width: 600px;\n  background-color: #fff;\n  border-radius: 3px;\n  overflow: hidden;\n`;\n\nconst SearchFormButtonStyled = styled.button`\n  display: inline-block;\n  width: 48px;\n  height: 48px;\n  border: 0;\n  background-size: 40%;\n  background-repeat: no-repeat;\n  background-position: center;\n  opacity: 0.6;\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  cursor: pointer;\n  outline: none;\n\n  :hover {\n    opacity: 1;\n  }\n`;\n\nconst SearchFormButtonSpanStyled = styled.span`\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  clip-path: inset(50%);\n  border: 0;\n`;\n\nconst SearchFormButtonLabelStyled = styled.label`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n`;\n\nconst SearchFormInputStyled = styled.input`\n  display: inline-block;\n  width: 100%;\n  font: inherit;\n  font-size: 20px;\n  border: none;\n  outline: none;\n  padding-left: 16px;\n  padding-right: 4px;\n\n  ::placeholder {\n    font: inherit;\n    font-size: 18px;\n  }\n`;\n\nexport {\n  SearchbarStyled,\n  SearchFormStyled,\n  SearchFormButtonStyled,\n  SearchFormButtonSpanStyled,\n  SearchFormInputStyled,\n  SearchFormButtonLabelStyled\n};\n","import axios from \"axios\";\naxios.defaults.baseURL = \"https://api.themoviedb.org/3\";\nconst MOVIE_API_KEY = \"a89b03c28f1cd3b25a7da78bf74e4fe0\";\n\nasync function getMoviesOrError(url, query = \"\") {\n  const response = await axios.get(url);\n  return !response?.data\n    ? Promise.reject(new Error(`No results for query ${query}`))\n    : response.data;\n}\n\nexport async function getTrendingDayMovies(page=1) {\n  return await getMoviesOrError(\n    `/trending/movie/day?api_key=${MOVIE_API_KEY}&page=${page}&include_adult=false`,\n  );\n}\n\nexport async function getSearchMovies(query, page=1) {\n  return await getMoviesOrError(\n    `/search/movie?query=${query}&api_key=${MOVIE_API_KEY}&page=${page}&include_adult=false`,\n  );\n}\n  \n  export async function getMovieDetails(movieId) {\n    return await getMoviesOrError(\n      `/movie/${movieId}?api_key=${MOVIE_API_KEY}`,\n    );\n  } \n\n  export async function getMovieCredits(movieId) {\n    return await getMoviesOrError(\n      `/movie/${movieId}/credits?api_key=${MOVIE_API_KEY}`,\n    );\n  } \n\n  export async function getMovieReviews(movieId, page=1) {\n    return await getMoviesOrError(\n      `/movie/${movieId}/reviews?api_key=${MOVIE_API_KEY}&page=${page}`,\n    );\n  } \n\n"],"names":["ListItem","item","id","title","name","ListItemStyled","Link","to","styled","RouterLink","Searchbar","status","useState","searchQuery","setSearchQuery","useSearchParams","setSearchParams","SearchbarStyled","SearchFormStyled","onSubmit","e","preventDefault","formQuery","trim","toast","query","SearchFormButtonLabelStyled","SearchFormInputStyled","value","onChange","target","toLowerCase","type","autoComplete","autoFocus","placeholder","SearchFormButtonStyled","disabled","SearchFormButtonSpanStyled","MoviesPage","page","setStatus","searchMovies","setSearchMovies","location","useLocation","get","useEffect","Status","getSearchMovies","then","newSearchMovies","results","length","catch","error","hasRequestMovies","goBackURL","state","from","map","axios","MOVIE_API_KEY","getMoviesOrError","url","response","data","Promise","reject","Error","getTrendingDayMovies","getMovieDetails","movieId","getMovieCredits","getMovieReviews"],"sourceRoot":""}